---
title: "Tuberculosis analysis"
author: "Łukasz Pięta"
date: "11/2/2020"
output: 
  html_document: 
    keep_md: yes
    df_print: kable
    code_folding: "hide"
---
### Libraries

```{r libraries,message=FALSE}
library(dplyr)
library(knitr)
#install.packages("ggplot2", dependencies = TRUE)
library(ggplot2)
#devtools::install_github("rstudio/EDAWR")
library(EDAWR)
```

### Read data
```{r read_data,cache=TRUE}
original_data <- tb
```

### Data summary

```{r data_summary}
kable(summary(original_data))
```

### Tuberculosis cases grouped by sex

```{r group_by_sex_summary,message=FALSE}
group_by_sex_summary <- original_data %>%
    filter(!is.na(child) & !is.na(adult) & !is.na(elderly)) %>%
    mutate(all=child + adult + elderly) %>%
    group_by(sex) %>%
    summarise(cases = sum(all)) 

kable(group_by_sex_summary)
```

### Tuberculosis cases grouped by age

```{r plot_age,message=FALSE}
tb %>%
    filter(!is.na(child) & !is.na(adult) & !is.na(elderly)) %>%
    group_by(year) %>%
    summarise(child_cases = sum(child), adult_cases = sum(adult), elderly_cases = sum(elderly)) %>%
    mutate(child_cases = child_cases / 1000) %>%
    select(year, child_cases) %>% plot(type="b")
```

### Tuberculosis cases grouped by age and country

```{r plot_age_country}
# TODO
```
